<html>
<head>
<script src="http://fn-cm.sbell.com.cn/cgi-bin/workspace/booking-dev/dump.cgi/jquery-1.12.3.js"></script>
</head>
<body>
<pre>



filename: <input type=file id=file name=file> <input type=button id=upload value=upload>
<span id=preview_img> </span>

<script>
$(document).ready(function(){
	$("#upload").click(function(){
		$.post("http://fn-cm.sbell.com.cn/cgi-bin/workspace/booking-dev/pictureUpload.cgi",
		{
		  action: "123",
		  file: $("#file").val(),
		},
		function (data,status){
			if(status == "error") {
				alert("数据：" + data + "\n状态：" + status);
			}else{
				$("#preview_img").html(data);
			}
		})
	});
});

</script>
 
 
 <hr>
 
 <pre>
			<form method="post" action="http://fn-cm.sbell.com.cn/cgi-bin/workspace/booking-dev/pictureUpload.cgi" enctype="multipart/form-data">
			Choose a config file. must be ended with ".png|jpg|gif"

			<input type="file" name="file">
			<input type=text name=action value=123>

			<input type="submit" value="Upload!">
			</form>


<hr>

<style>
    #exec_target{display:none;width:0;height:0;}
    #feedback{width:1200px;margin:0 auto;}
    #feedback img{float:left;width:300px;height:300px;}    
</style>
<script type="text/javascript">
$(document).ready(function(){
    //选择文件成功则提交表单
    $("#upload_file").change(function(){
        if($("#upload_file").val() != '') $("#submit_form").submit();
    });
    //iframe加载响应，初始页面时也有一次，此时data为null。
    $("#exec_target").load(function(){
        var data = $(window.frames['exec_target'].document.body).html();
//		alert(body);
	//	alert(body[0].innerHTML);
		//var data = "";
        //若iframe携带返回数据，则显示在feedback中
        if(data != null){
            $("#feedback").append(data.replace(/&lt;/g,'<').replace(/&gt;/g,'>'));
            $("#upload_file").val('');
        }
    });
});
</script>
<form id="submit_form" method="post" action="http://fn-cm.sbell.com.cn/cgi-bin/workspace/booking-dev/pictureUpload.cgi"
      target="exec_target" enctype="multipart/form-data">
    <input type="file" name="file" id="upload_file">        <!-- 添加上传文件 -->
	<input type=text name=action value=123>
	<input type="submit" value="Upload!">
</form>
<iframe id="exec_target" name="exec_target"></iframe>    <!-- 提交表单处理iframe框架 -->
<div id="feedback"></div>    <!-- 响应返回数据容器 -->
</body>
</html>
			
			
			


			
</body>
</html>